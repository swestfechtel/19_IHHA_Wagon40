\chapter{Fundamentals of Railway Vehicle Engineering}
\label{chap:FundamentalsOfRailwayVehicleEngineering}
\par\noindent
\textit{\textbf{Introduction}} This section deals with the engineering backgrounds of the work, especially in regards to railway vehicle engineering and railway physics. 
For the creation of a braking model, it is necessary to have at least a basic understanding of the engineering and physics behind rail traffic. The most fundamental component to understand is, of course, the actual braking process.

\section{The Train Brake}
\label{sec:TrainBrake}
\par\noindent
There are a number of different construction methods for brakes, but each must address two problems: The means of transmission of commands and the actual form of brake force generation. The focus here will lie on the pneumatic brake, since it is still the most prevalent in cargo vehicles. From a macro perspective, the pneumatic brake has three main components: The train driver's brake valve, the brake pipe and one or more brake cylinders for each wagon or locomotive. The driver's valve and the brake pipe are primarily the means of command transmission, while the brake cylinder's job is the generation of brake force. 

\par
The braking system is an indirect one, which means the brake pipe needs to be vented to apply the brakes. Therefore, the brake pipe is kept at a running pressure of 5 bar. One advantage of this approach is that brakes are automatically applied in case of train separation. The downside, however, is that command transmission is limited to the speed of sound. In order to generate that pressure, the locomotive contains a compressor and an air reservoir. Initially, the brake pipe as well as all auxiliary air reservoirs are brought to operating pressure. If the train operator wishes to brake, he has to actuate the driver's brake valve, which in turn vents the brake pipe, usually as far as 3.5 bar (full braking), sometimes even lower. As rule of thumb, the more pressure is vented, the more braking force is applied. Each wagon brake has, in essence, an auxiliary air reservoir, a distributor valve and a braking cylinder. When the brake pipe is vented, the air in the auxiliary reservoir has a higher pressure. This difference in pressure triggers a switch of the distributor valve, and the air from the reservoir may go into the brake cylinder. This increase in the cylinder generates the actual braking force. To summarize, the amount of generated braking pressure is directly proportional to the amount of pressure vented.

\section{Influences on Braking Performance}
\label{sec:InfluencesOnBraking}
\par\noindent
Since the aim of this work is to monitor braking performance, it becomes necessary to understand which factors influence the braking process, and how. The braking process is, in its core, a system. A system may be defined as a set of objects, which are interconnected by relations. It is enclosed by its environment, which may or may not affect the system itself. Below is an illustration, also called box model:

\begin{align*}
	\displaystyle {\mathcal {R}}\ 
	\rightarrow \ 
	{\begin{array}{|c|}\hline \quad \\\quad {\mathcal {V}}_{i}\leftrightarrow {\mathcal {V}}_{n}\quad \\\quad \\\hline \end{array}}\ 
	\rightarrow
\end{align*}

\par\noindent
The box represents the actual system, ${\mathcal{V}}_{i}$ are the system variables, or objects, their relations represented by the $\leftrightarrow$. The ${\mathcal{R}}$ represents the system's environment and its influence on the system itself. Finally, the rightmost arrow $\rightarrow$ is the influence the system might have on the environment, though this is often disregarded as the focus lies on what happens inside the system. Creating a box model for the braking process makes for an easier identification of the influencing factors, and allows for their categorization into inherent, i.e. system variables, and external, i.e. system environment.
\par
From a modeling perspective, it is sensible to differentiate as follows: Everything related to the train itself is part of the system, and everything else is part of the system's environment. As per definition, it is compromised of a set of variables, a set of relations, and a set of constants. Let us make a formal definition of the model for the braking process system:

\begin{align*}
{\mathcal {M}} = \{ {\mathcal{V}}, {\mathcal{R}}, {\mathcal{C}} \}
\end{align*}

\noindent
where ${\mathcal{V}}$ is the set of system variables, ${\mathcal{R}}$ is the set of relations (a) between elements of ${\mathcal{V}}$ and (b) between system and environment, and ${\mathcal{C}}$ is the set of system constants. The system variables may be subsystems themselves. We shall take a closer look at ${\mathcal{V}}$ first.

\subsection{Inherent factors, model variables}
\label{sec:InherentFactors}
\par\noindent
Looking at ${\mathcal{M}}$, which is the system describing the braking process, ${\mathcal{V}}$ consists of all factors inherent to the train which have an impact on the braking, as well as the relevant quantifiers. The main ones are:
\begin{itemize}
	\item The train brake
	\item The wagon mass, denoted as $m$
	\item The train velocity, denoted as $v$
	\item The train composition, i.e. in which order the wagons are, for example the heaviest wagons being in front and the lighter ones at the back, denoted as $comp$
	\item The generated braking force, denoted as $F_{b}$
	\item The train's deceleration, denoted as $a$
	\item The train's braking distance, denoted as $d$
\end{itemize}
\noindent
It is noteworthy that the train brake is another system in itself, which is perfectly fine of course. Alas, it is therefore necessary to define another model.

\begin{align*}
{\mathcal {M}}_{B} = \{ {\mathcal {V}}_{B}, {\mathcal {R}}_{B}, {\mathcal {C}}_{B} \}
\end{align*}

\noindent
Let ${\mathcal{M}}_{B}$ be the model describing the system train brake, with ${\mathcal {V}}_{B} = \{ {\mathcal {M}}_{bv}, {\mathcal {M}}_{bp}, {\mathcal {M}}_{bc} \}$, where ${\mathcal {M}}_{bv}$ is the model of the brake valve, ${\mathcal {M}}_{bp}$ the model of the brake pipe and ${\mathcal {M}}_{bc}$ the model of the brake cylinder, which in turn shall be defined as follows:

\begin{align*}
{\mathcal {M}}_{bv} = \{ {\mathcal {V}}_{bv}, {\mathcal {R}}_{bv}, {\mathcal {C}}_{bv} \}
\end{align*}

\noindent
Let ${\mathcal {M}}_{bv}$ be the model describing the system brake valve, with ${\mathcal {V}}_{bv} = \{x\}$, ${\mathcal {R}}_{bv} = \emptyset$ and $c_{bv} = \emptyset$, where $x$ is the state of the brake valve, i.e. its opening percentage, ranging from 0 (fully closed) to 1 (fully open, full braking).

\begin{align*}
{\mathcal {M}}_{bp} = \{ {\mathcal {V}}_{bp}, {\mathcal {R}}_{bp}, {\mathcal {C}}_{bp} \}
\end{align*}

\noindent
Let ${\mathcal {M}}_{bp}$ be the model describing the system brake pipe, with ${\mathcal {V}}_{bp} = \{ l_{bp}, p_{bp} \}$, ${\mathcal {R}}_{bp} = \emptyset$ and $c_{bp} = \{ v_{bp} \}$, where $l_{bp}$ is the physical length of the brake pipe, $p_{bp}$ is the pressure on the brake pipe and $v_{bp}$ is the propagation velocity of the pipe's medium. 

\begin{align*}
{\mathcal {M}}_{bc} = \{ {\mathcal {V}}_{bc}, {\mathcal {R}}_{bc}, {\mathcal {C}}_{bc} \}
\end{align*}

\noindent
Let ${\mathcal {M}}_{bc}$ be the model describing the system brake cylinder, with ${\mathcal {V}}_{bc} = \{ p_{bc} \}$, ${\mathcal {R}}_{bc} = \emptyset$ and $c_{bc} = \{ t_{bc} \}$, where $p_{bc}$ is the cylinder's pressure and $t_{bc}$ is the cylinder's fill time.
\bigskip
\par\noindent
This wraps up the definition of ${\mathcal{V}}_{B}$. We may now get to the definition of ${\mathcal{R}}_{B}$, which consists of the relations (a) between the elements of ${\mathcal{V}}_{B}$ and (b) between ${\mathcal{M}}_{B}$ and its environment. Let us begin with (a):
\bigskip
\par\noindent
\textit{\textbf{Convention}} For readability purposes, $\propto$ shall from here on denote direct proportionality, and $\sim$ shall denote inverse proportionality.
\bigskip
\par
${\mathcal{M}}_{bv}$ relates to ${\mathcal{M}}_{bp}$ in the sense that the state of the brake valve has a direct influence on the pressure on the brake pipe. More specifically, $x \in {\mathcal{V}}_{bv}$ is inversely proportional to $p_{bp} \in {\mathcal{V}}_{bp}$. The higher the value of $x$, i.e. the opening percentage of the brake valve, the lower the value of $p_{bp}$, i.e. the pressure on the brake pipe. We can therefore denote $x \sim p_{bp}$, and subsequently define a relation $R_{bv,bp}: {\mathcal{M}}_{bv} \sim {\mathcal{M}}_{bp}$. 
\par
${\mathcal{M}}_{bp}$ relates to ${\mathcal{M}}_{bc}$ in the sense that the pressure on the brake pipe has a direct influence on the brake cylinder's pressure. More specifically, $p_{bp} \in {\mathcal{V}}_{bp}$ is inversely proportional to $p_{bc} \in {\mathcal{V}}_{bc}$. The lower the value of $p_{bp}$, i.e. the pressure on the brake pipe, the higher the value $p_{bc}$, i.e. the pressure in the brake cylinder. We can therefore denote $p_{bp} \sim p_{bc}$, and subsequently define a relation $R_{bp,bc}: {\mathcal{M}}_{bp} \sim {\mathcal{M}}_{bc}$.
\par
For simplicity, we can look at ${\mathcal{M}}_{B}$ as being isolated from its environment, i.e. the environment does not impact ${\mathcal{M}}_{B}$, and vice versa. Therefore, (b) is void. Consequently, we can define ${\mathcal{R}}_{B}$ as follows:

\begin{align*}
{\mathcal{R}}_{B} = \{ R_{bv,bp}, R_{bp,bc} \}
\end{align*}

\noindent
This finally leaves us with $c_{B}$. Since call constants are specific to the respective sub-models $\in {\mathcal{V}}_{B}$, ${\mathcal{M}}_{B}$ has no constants of its own, therefore $c_{B} = \emptyset$. This completes the definition of ${\mathcal{M}}_{B}$, and we can properly define the set of model variables of the model braking process:

\begin{align*}
{\mathcal{V}} = \{ {\mathcal{M}}_{B},m,v,comp,F_{b},a,d \}
\end{align*}

\subsection{Relations}
\label{sec:Relations}
\par\noindent
Looking at our model ${\mathcal{M}}$, we have now defined its set of variables, ${\mathcal{V}}$. Next, it is necessary to define its set of relations, ${\mathcal{R}}$, which may be distinguished into internal and external relations.

\subsubsection{Relations between system variables}
\label{sec:RelationsSystemVariables}
\par\noindent
Obviously, the train brake ${\mathcal{M}}_{B}$ relates to $F_{B}$ as it is the actor responsible for generating the braking force. More specifically, $p_{bc} \in {\mathcal{V}}_{bc}$, which is the pressure in the brake cylinder, is directly proportionate to $F_{b}$, meaning the higher the pressure, the more force is applied. We can therefore denote $p_{bc} \propto F_{b}$, and subsequently define a relation $R_{{\mathcal{M}}_{B},F_{b}}: {\mathcal{M}}_{B} \propto F_{b}$.
\par
Furthermore, the wagon mass $m$ relates to $F_{B}$ as well. The vehicle mass is proportional to the kinetic energy to dissipate during braking actions. The larger $m$ is, the more kinetic energy ($E=\frac{1}{2} \cdot m \cdot v^{2}$), and thus the higher the required braking force to slow the train down. As the vehicle mass varies, so must the applied braking force in order to avoid wheel slip and locking of the wheels which occurs if too much force is applied (\cite{Cruceanu2012}, p.47). We can therefore denote $m \propto F_{b}$, and subsequently define a relation $R_{m,F_{b}}: m \propto F_{b}$.
\par
The braking deceleration $a$, neglecting other resistances, is influenced by two factors: The applied braking force $F_{b}$, and the vehicle's mass $m$. As per Newton's second law of motion, $F=m \cdot a$, so $a=\frac{F_{b}}{m}$ [train braking, 23]. In practice, this means the braking force is directly proportional to the braking deceleration, and the vehicle mass is inversely proportional to $a$, not taking into consideration wheel slip. We can therefore denote $F_{b} \propto a$, and $m \sim a$, and subsequently define two relations $R_{F_{b},a}: F_{b} \propto a$, and $R_{m,a}: m \sim a$.
\par
Finally, the braking distance $d$ is also dependent on two factors: The running speed $v$, and the braking deceleration $a$.  We have 

\begin{equation}
\label{eq:brakingdistance}
\begin{aligned}
&d=\frac{1}{2} \cdot a \cdot t^{2} \\
&v=a \cdot t \quad \rightarrow \quad d=\frac{v^{2}}{2 \cdot a}
\end{aligned}
\end{equation}

\noindent
where $t$ is the stopping time (\cite{Cruceanu2012}, p.51). So in practice, the square of the running speed $v$ is directly proportional to the braking distance, and the braking deceleration is inversely proportional to $d$. We can therefore denote $v \propto d$, and $a \sim d$, and subsequently define two relations $R_{v,d}: v \propto d$, and $R_{a,d}: a \sim d$.
\par
This completes the set of internal relations of ${\mathcal{R}}$.

\subsubsection{Relations between environment and system}
\label{sec:RelationsEnvironmentSystem}
\par\noindent
To recapitulate, ${\mathcal{M}}$ is a model for the braking process. Having handled its internal relations, it is now time to focus on the relation between the system and its environment. As established in section \ref{sec:InfluencesOnBraking}, the environment consists of all factors which have an influence on the braking process, but are not inherent to the train itself. In practice, this is the track which the train operates on. More specifically, it is two main properties of the track:
\begin{itemize}
	\item The track gradient, denoted as $\alpha$
	\item The wheel/rail friction coefficient, denoted as $\mu$
\end{itemize}
\noindent
As shown earlier, the braking deceleration has a substantial influence on the braking process, namely on the braking distance and on the stopping time (see equation \ref{eq:brakingdistance}). So far, the deceleration was only related to vehicle mass $m$ and applied braking force $F_{b}$, both being internal relations. However, the track gradient, also has an influence on $a$. As the train goes uphill, the deceleration increases; as it goes downhill, it decreases, due to gravity. A simple formula might look like this:

\begin{equation}
\label{eq:deceleration}
a = a_{brake} + a_{grad}
\end{equation}

\noindent
where $a$ is the total braking deceleration, $a_{brake}$ is the deceleration resulting from the application of the brakes, and $a_{grad}$ is the acceleration/deceleration resulting from the track gradient. Let $a_{grad}$ be positive for upward, negative for downward slopes. We can define $a_{grad}$ as a step function

\begin{equation}
\label{eq:gradientdeceleration}
a_{grad}(\alpha) =
\begin{cases}
\geq 0 & \text{if $\alpha \geq 0$} \\
< 0 & \text{if $\alpha < 0$}
\end{cases}
\end{equation}

\noindent
where $\alpha$ is the value of the gradient, e.g. a percentage or an angle. This shows the track gradient is directly proportional to the total braking deceleration. We can therefore denote $\alpha \propto a$, and subsequently define a relation $R_{\alpha,a}: \alpha \propto a$.
\par
The second factor to look at is the wheel/rail adhesion. Environmental effects like rain, ice or contaminants such as leaves have a degrading effect on the wheel/rail friction. This is expressed by a friction coefficient $\mu$, where a lower value, for example $\mu = 0.2$ for a wet rail surface, means worse braking performance compared to a higher value, e.g. $\mu = 0.4$ for normal conditions. The friction coefficient is a limiting factor for the applied braking force, in the sense that when too much force force is applied, wheel slip occurs, and braking performance decreases (\cite{Bosso2006}, p.876). While $\mu$ does not have a direct influence on $F_{b}$, it is, in practice, still related to it in that it is a limiting factor; an indirect influence, so to speak. In that regard, we might say it is directly proportional to the braking force: The higher the friction coefficient, the higher the maximum braking force that may be applied. We can therefore denote $\mu \propto F_{b}$, and subsequently define a relation $R_{\mu,F_{b}}: \mu \propto F_{b}$.
\bigskip
\par\noindent
We may now properly define the set of relations of the model braking process:

\begin{align*}
{\mathcal{R}} = \{ R_{{\mathcal{M}}_{B},F_{b}} \:,\: R_{m,F_{b}} \:,\: R_{F_{b},a} \:,\: R_{m,a} \:,\: R_{v,d} \:,\: R_{a,d} \:,\: R_{\alpha,a} \:,\: R_{\mu,F_{b}} \}
\end{align*}

\section{Constants}
\label{sec:Constants}
\par\noindent
The braking process, being a dynamic one, has no constants in itself. Some of its components do, in particular the models making up the train brake, like the brake pipe ${\mathcal{M}}_{bp}$'s propagation velocity $v_{bp}$. However, these have already been discussed; we can therefore conclude that ${\mathcal{C}} = \emptyset$.
\bigskip
\par\noindent
To summarize, we have now defined all necessary components of ${\mathcal{M}}$, namely its set of model variables ${\mathcal{V}}$, its set of relations ${\mathcal{R}}$, and its set of constants ${\mathcal{C}}$. This model will be used in chapter \ref{chap:ModelingOfTrainOperations} as a theoretical basis upon which to build a Simulink model, simulating the braking process.

\section{Time considerations}
\label{sec:TimeConsiderations}
\par\noindent
So far, we have looked at the braking process from a static point of view. However, in reality it is a dynamic process and thus, time has to be taken into consideration. More specifically, it is a continuous model: For ${\mathcal{M}}$, the state of its variables changes all the time for the whole duration of the process. 
\par
Remember how we have defined the model. It is a set comprising of a number of subsets; but it describes a system, in this case the braking process of a train. This means that the model variables, i.e. the elements of ${\mathcal{V}}$, are subject to change as the process progresses. This can be expressed by another equation, in form of a function $f$:

\begin{align*}
\{ V \} &= f( {\mathcal{M}} ) \\
		&= f( {\mathcal{V}}, {\mathcal{R}}, {\mathcal{C}} )
\end{align*}

\noindent
This suffices to determine the system's state before and after a relation has changed. As an example, $v$ might be $25 \; \frac{m}{s}$ when the train operator engages the brakes, and $10 \; \frac{m}{s}$ when the brakes have been released. However, since we wish to monitor the whole braking process, it is also interesting to see how the state changes over time. In this example, $v$ would be $25 \; \frac{m}{s}$ for $t=0$, $22.3 \; \frac{m}{s}$ for $t=50$ etc. We therefore need a new equation where ${\mathcal{V}}$ is also dependent on $t$.

\begin{align*}
{\mathcal{V}}(t)' = f ( {\mathcal{M}} )
\end{align*}

\noindent
This allows for the calculation of the rate of change for any given point in time. By integrating the equation, one can also obtain the actual values of the elements of ${\mathcal{V}}$, e.g. the value of $v$ for $t=120$. The function $f$ is one, or a set of, differential equations. In practice, these are automatically generated and calculated by Simulink.
\bigskip
\par\noindent
We have now laid all the necessary groundwork to build a functioning model of the braking process, which can then be used for simulation and data generation. The next chapter will deal with this.