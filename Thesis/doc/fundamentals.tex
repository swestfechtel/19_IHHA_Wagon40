\chapter{Fundamentals of Railway Vehicle Engineering}
\label{chap:FundamentalsOfRailwayVehicleEngineering}
\par\noindent
\textit{\textbf{Introduction}} This section deals with the engineering backgrounds of the work, especially in regards to railway vehicle engineering and railway physics. 
For the creation of a braking model, it is necessary to have at least a basic understanding of the engineering and physics behind rail traffic. The most fundamental component to understand is, of course, the actual braking process.

\section{The train brake}
\label{sec:TrainBrake}
\par\noindent
There is a number of different construction methods for brakes, but each must address two problems: The means of transmission of commands and the actual form of brake force generation. The focus here will lie on the pneumatic brake, since it is still the most prevalent in cargo vehicles. From a macro perspective, the pneumatic brake has three main components: The train driver's brake valve, the brake pipe and one or more brake cylinders for each wagon or locomotive. The driver's valve and the brake pipe are primarily the means of command transmission, while the brake cylinder's job is the generation of brake force. 

\par
The braking system is an indirect one, which means the brake pipe needs to be vented to apply the brakes. Therefore, the brake pipe is kept at a running pressure of 5 bar. One advantage of this approach is that brakes are automatically applied in case of train separation. The downside, however, is that command transmission is limited to the speed of sound. In order to generate that pressure, the locomotive contains a compressor and an air reservoir. Initially, the brake pipe as well as all auxiliary air reservoirs are brought to operating pressure. If the train operator wishes to brake, he has to actuate the driver's brake valve, which in turn vents the brake pipe, usually as far as 3.5 bar (full braking), sometimes even lower. As rule of thumb, the more pressure is vented, the more braking force is applied. Each wagon brake has, in essence, an auxiliary air reservoir, a distributor valve and a braking cylinder. When the brake pipe is vented, the air in the auxiliary reservoir has a higher pressure. This difference in pressure triggers a switch of the distributor valve, and the air from the reservoir may go into the brake cylinder. This increase in the cylinder generates the actual braking force. To summarize, the amount of generated braking pressure is directly proportional to the amount of pressure vented.

\section{Influences on braking performance}
\label{sec:InfluencesOnBraking}
\par\noindent
Since the aim of this work is to monitor braking performance, it becomes necessary to understand which factors influence the braking process, and how. The braking process is, in its core, a system. A system may be defined as a set of objects, which are interconnected by relations. It is enclosed by its environment, which may or may not affect the system itself. Below is an illustration, also called box model:

\begin{align*}
	\displaystyle {\mathcal {R}}\ 
	\rightarrow \ 
	{\begin{array}{|c|}\hline \quad \\\quad {\mathcal {V}}_{i}\leftrightarrow {\mathcal {V}}_{n}\quad \\\quad \\\hline \end{array}}\ 
	\rightarrow
\end{align*}

\par\noindent
The box represents the actual system, ${\mathcal{V}}_{i}$ are the system variables, or objects, their relations represented by the $\leftrightarrow$. The ${\mathcal{R}}$ represents the system's environment and its influence on the system itself. Finally, the rightmost arrow $\rightarrow$ is the influence the system might have on the environment, though this is often disregarded as the focus lies on what happens inside the system. Creating a box model for the braking process makes for an easier identification of the influencing factors, and allows for their categorization into inherent, i.e. system variables, and external, i.e. system environment.
\par
From a modeling perspective, it is sensible to differentiate as follows: Everything related to the train itself is part of the system, and everything else is part of the system's environment. As per definition, it is compromised of a set of variables, a set of relations, and a set of constants. Let us make a formal definition of the model for the braking process system:

\begin{align*}
{\mathcal {M}} = \{ \{{\mathcal {V}}\}, \{{\mathcal{R}}\}, \{c\} \}
\end{align*}

\noindent
where $\{{\mathcal {V}}\}$ is the set of system variables, $\{{\mathcal {R}}\}$ is the set of relations (a) between elements of $\{{\mathcal {V}}\}$ and (b) between system and environment, and $\{c\}$ is the set of system constants. The system variables may be subsystems themselves. We shall take a closer look at $\{{\mathcal {V}}\}$ first.

\subsection{Inherent factors, model variables}
\label{sec:InherentFactors}
\par\noindent
Looking at ${\mathcal{M}}$, which is the system describing the braking process, $\{{\mathcal {V}}\}$ consists of all factors inherent to the train which have an impact on the braking, as well as the relevant quantifiers. The main ones are:
\begin{itemize}
	\item The train brake
	\item The wagon mass, denoted as $m$
	\item The train velocity, denoted as $v$
	\item The train composition, i.e. in which order the wagons are, for example the heaviest wagons being in front and the lighter ones at the back, denoted as $comp$
	\item The generated braking force, denoted as $F_{b}$
	\item The train's deceleration, denoted as $a$
	\item The train's braking distance, denoted as $d$
\end{itemize}
\noindent
It is noteworthy that the train brake is another system in itself, which is perfectly fine of course. Alas, it is therefore necessary to define another model.

\begin{align*}
{\mathcal {M}}_{B} = \{ \{{\mathcal {V}}_{B}\}, \{{\mathcal{R}}_{B}\}, \{c_{B}\} \}
\end{align*}

\noindent
Let ${\mathcal{M}}_{B}$ be the model describing the system train brake, with $\{{\mathcal {V}}_{B}\} = \{ {\mathcal {M}}_{bv}, {\mathcal {M}}_{bp}, {\mathcal {M}}_{bc} \}$, where ${\mathcal {M}}_{bv}$ is the model of the brake valve, ${\mathcal {M}}_{bp}$ the model of the brake pipe and ${\mathcal {M}}_{bc}$ the model of the brake cylinder, which in turn shall be defined as follows:

\begin{align*}
{\mathcal {M}}_{bv} = \{ \{{\mathcal {V}}_{bv}\}, \{{\mathcal{R}}_{bv}\}, \{c_{bv}\} \}
\end{align*}

\noindent
Let ${\mathcal {M}}_{bv}$ be the model describing the system brake valve, with ${\mathcal {V}}_{bv} = \{x\}$, ${\mathcal {R}}_{bv} = \emptyset$ and $c_{bv} = \emptyset$, where $x$ is the state of the brake valve, i.e. its opening percentage, ranging from 0 (fully closed) to 1 (fully open, full braking).

\begin{align*}
{\mathcal {M}}_{bp} = \{ \{{\mathcal {V}}_{bp}\}, \{{\mathcal{R}}_{bp}\}, \{c_{bp}\} \}
\end{align*}

\noindent
Let ${\mathcal {M}}_{bp}$ be the model describing the system brake pipe, with ${\mathcal {V}}_{bp} = \{ l_{bp}, p_{bp} \}$, ${\mathcal {R}}_{bp} = \emptyset$ and $c_{bp} = \{ v_{bp} \}$, where $l_{bp}$ is the physical length of the brake pipe, $p_{bp}$ is the pressure on the brake pipe and $v_{bp}$ is the propagation velocity of the pipe's medium. 

\begin{align*}
{\mathcal {M}}_{bc} = \{ \{{\mathcal {V}}_{bc}\}, \{{\mathcal{R}}_{bc}\}, \{c_{bc}\} \}
\end{align*}

\noindent
Let ${\mathcal {M}}_{bc}$ be the model describing the system brake cylinder, with ${\mathcal {V}}_{bc} = \{ p_{bc} \}$, ${\mathcal {R}}_{bc} = \emptyset$ and $c_{bc} = \{ t_{bc} \}$, where $p_{bc}$ is the cylinder's pressure and $t_{bc}$ is the cylinder's fill time.
\bigskip
\par\noindent
This wraps up the definition of ${\mathcal{V}}_{B}$. We may now get to the definition of ${\mathcal{R}}_{B}$, which is the relations (a) between the elements of ${\mathcal{V}}_{B}$ and (b) between ${\mathcal{M}}_{B}$ and its environment. Let us begin with (a):
\bigskip
\par\noindent
\textit{\textbf{Convention}} For readability purposes, $\propto$ shall from here on denote direct proportionality, and $\sim$ shall denote inverse proportionality.
\bigskip
\par
${\mathcal{M}}_{bv}$ relates to ${\mathcal{M}}_{bp}$ in the sense that the state of the brake valve has a direct influence on the pressure on the brake pipe. More specifically, $x \in {\mathcal{V}}_{bv}$ is inversely proportional to $p_{bp} \in {\mathcal{V}}_{bp}$. The higher the value of $x$, i.e. the opening percentage of the brake valve, the lower the value of $p_{bp}$, i.e. the pressure on the brake pipe. We can therefore denote $x \sim p_{bp}$, and subsequently define a relation $R_{bv,bp}: {\mathcal{M}}_{bv} \sim {\mathcal{M}}_{bp}$. 
\par
${\mathcal{M}}_{bp}$ relates to ${\mathcal{M}}_{bc}$ in the sense that the pressure on the brake pipe has a direct influence on the brake cylinder's pressure. More specifically, $p_{bp} \in {\mathcal{V}}_{bp}$ is inversely proportional to $p_{bc} \in {\mathcal{V}}_{bc}$. The lower the value of $p_{bp}$, i.e. the pressure on the brake pipe, the higher the value $p_{bc}$, i.e. the pressure in the brake cylinder. We can therefore denote $p_{bp} \sim p_{bc}$, and subsequently define a relation $R_{bp,bc}: {\mathcal{M}}_{bp} \sim {\mathcal{M}}_{bc}$.
\par
For simplicity, we can look at ${\mathcal{M}}_{B}$ as being isolated from its environment, i.e. the environment does not impact ${\mathcal{M}}_{B}$, and vice versa. Therefore, (b) is void. Consequently, we can define ${\mathcal{R}}_{B}$ as follows:

\begin{align*}
{\mathcal{R}}_{B} = \{ R_{bv,bp}, R_{bp,bc} \}
\end{align*}

\noindent
This finally leaves us with $c_{B}$. Since call constants are specific to the respective sub-models $\in {\mathcal{V}}_{B}$, ${\mathcal{M}}_{B}$ has no constants of its own, therefore $c_{B} = \emptyset$. This completes the definition of ${\mathcal{M}}_{B}$, and we can properly define the set of model variables of the model braking process:

\begin{align*}
\{ {\mathcal{V}} \} = \{ {\mathcal{M}}_{B},m,v,comp,F_{b},a,d \}
\end{align*}

\bigskip\noindent\TODO{
	Wie genau Bremsmodell definieren?
	Notizen: Bremse besteht aus, wie oben definiert:
	\begin{itemize}
		\item \sout{Brake valve - opening percentage $x$}
		\item \sout{Brake pipe - length $l_{bp}$, propagation velocity $v_{bp}$, pressure $p_{bp}$}
		\item \sout{Brake cylinder - fill time $t_{bc}$, pressure $p_{bc}$}
	\end{itemize}
	Relationen sind:
	\begin{enumerate}
		\item \sout{$x \sim p_{bp}$, intern}
		\item \sout{$p_{bp} \sim p_{bc}$, intern}
		\item $p_{bc} \sim F_{b}$, ausgangs-
		\item Wie zeitliche Auswirkungen darstellen?
	\end{enumerate}
}

\subsection{Relations}
\label{sec:Relations}
\par\noindent
Looking at our model ${\mathcal{M}}$, we have now defined its set of variables, ${\mathcal{V}}$. Next, it is necessary to define its set of relations, ${\mathcal{R}}$, which may be distinguished into internal and external relations.

\subsubsection{Relations between system variables}
\label{sec:RelationsSystemVariables}
\par\noindent
Obviously, the train brake ${\mathcal{M}}_{B}$ relates to $F_{B}$ as it is the actor responsible for generating the braking force. More specifically, $p_{bc} \in {\mathcal{V}}_{bc}$, which is the pressure in the brake cylinder, is directly proportionate to $F_{b}$, meaning the higher the pressure, the more force is applied. We can therefore denote $p_{bc} \propto F_{b}$, and subsequently define a relation $R_{{\mathcal{M}}_{B},F_{b}}: {\mathcal{M}}_{B} \propto F_{b}$.
\par
Furthermore, the wagon mass $m$ relates to $F_{B}$ as well

\bigskip\noindent\TODO{
	Wie interagieren die Systemvariablen untereinander? Relationen sind:
	\begin{itemize}
		\item \sout{${\mathcal{M}}_{B} \propto F_{b}$}
		\item $m \propto F_{b}$
		\item $v \propto d$
		\item $F_{B} \propto a$
		\item $a \propto d$
	\end{itemize}
}

\subsubsection{Relations between environment and system}
\label{sec:RelationsEnvironmentSystem}
\par\noindent
\TODO{\begin{itemize}
		\item Wheel Rail Friction
		\item Track gradient
\end{itemize}}

\section{What to monitor}
\label{sec:Monotoring}
\par\noindent
\TODO{
	Gehört das zu Modellvariablen??
	\begin{itemize}
		\item Brake force over time
		\item Brake pressure over time
		\item Deceleration
		\item Velocity
		\item Braking distance
	\end{itemize}
}